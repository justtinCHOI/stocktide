import{u as b,j as e,c as G,m as H,B as J}from"./index-BYRxBMX6.js";import{b as r}from"./vendor-BJTqHD0O.js";import{b as M,c as E}from"./index-BUmq1CZ1.js";import{R as K}from"./ResultModal-Dd7iMixh.js";import{C as N,F as n,L as l,I as c,E as P,a as R,b as S,B as Q,c as U}from"./content-C3Cgojep.js";import"./utils-CJA6l5lt.js";import"./styled-components.browser.esm-Ds5_C6nt.js";const V={memberId:0,name:"",email:"",password:"",confirmPassword:""},X=()=>{const[s,x]=r.useState(V),{loginState:w}=b(),[i,m]=r.useState(""),[d,j]=r.useState(""),[I,g]=r.useState(),[u,k]=r.useState(!1),[f,v]=r.useState(!1),{doLogout:F,moveToLogin:B}=b(),C=r.useRef(null),h=r.useRef(null),y=r.useRef(null),p=r.useRef(null);r.useEffect(()=>{x({...w})},[w]);const a=t=>{const{name:o,value:z}=t.target;x(A=>({...A,[o]:z})),t.target.name==="email"?L(t.target.value).then():t.target.name==="confirmPassword"&&D()},L=async t=>{try{const o=await G(t);m(o?"이미 사용 중인 이메일입니다.":"")}catch(o){console.error("이메일 중복 검사 중 오류가 발생했습니다.",o),m("이메일 중복 검사 중 오류가 발생했습니다.")}},D=()=>{s.password!==s.confirmPassword?j("비밀번호가 일치하지 않습니다."):j("")},T=()=>{if(!s.name){alert("이름을 입력해 주세요."),C.current.focus();return}if(!s.email){alert("이메일을 입력해 주세요."),h.current.focus();return}if(!s.password){alert("비밀번호를 입력해 주세요."),y.current.focus();return}if(!s.confirmPassword){alert("비밀번호를 입력해 주세요."),p.current.focus();return}if(i){alert("이메일을 확인해 주세요."),h.current.focus();return}if(d){alert("비밀번호가 일치하지 않습니다."),p.current.focus();return}const t={memberId:s.memberId,name:s.name,email:s.email,password:s.password};H(t).then(()=>{g("Modified")})},O=()=>{g(null),F(),J.info("로그아웃되었습니다"),B()},W=()=>{k(!u)},q=()=>{v(!f)};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[I&&e.jsx(K,{title:"회원정보",content:"정보수정완료",callbackFn:O}),e.jsxs(n,{children:[e.jsx(l,{children:"이름"}),e.jsx(c,{name:"name",type:"text",value:s.name,onChange:a,ref:C})]}),e.jsxs(n,{children:[e.jsx(l,{children:"이메일"}),e.jsx(c,{name:"email",type:"email",value:s.email,onChange:a,ref:h}),i&&e.jsx(P,{children:i})]}),e.jsxs(n,{children:[e.jsx(l,{children:"비밀번호"}),e.jsxs(R,{children:[e.jsx(c,{name:"password",type:u?"text":"password",value:s.password,onChange:a,ref:y}),e.jsx(S,{onClick:W,children:u?e.jsx(M,{}):e.jsx(E,{})})]})]}),e.jsxs(n,{children:[e.jsx(l,{children:"비밀번호 재확인"}),e.jsxs(R,{children:[e.jsx(c,{name:"confirmPassword",type:f?"text":"password",onChange:a,ref:p}),e.jsx(S,{onClick:q,children:f?e.jsx(M,{}):e.jsx(E,{})})]}),d&&e.jsx(P,{children:d})]}),e.jsx(n,{style:{justifyContent:"end"},children:e.jsx(Q,{type:"button",onClick:T,children:"Modify"})})]}),e.jsx(U,{})]})},te=()=>e.jsx(X,{});export{te as default};
//# sourceMappingURL=MemberModify-D9XzCOd6.js.map
